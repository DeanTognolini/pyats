# =============================================================================
# pyATS Testbed Template
# =============================================================================
#
# DEVICE TEMPLATE:
# ----------------
#   <device-hostname>:
#     os: [ios|iosxe|iosxr|nxos|asa|junos]
#     type: router
#     credentials:
#       default:
#         username: '%ENV{PYATS_USERNAME}'
#         password: '%ENV{PYATS_PASSWORD}'
#     connections:
#       defaults:
#         class: unicon.Unicon
#       cli:
#         protocol: ssh
#         ip: <management-ip>
#         port: 22
#         # Optional for legacy devices:
#         # ssh_options: -o KexAlgorithms=+diffie-hellman-group1-sha1 -o HostKeyAlgorithms=+ssh-rsa
#
# TOPOLOGY TEMPLATE:
# ------------------
#   <device-hostname>:
#     interfaces:
#       <interface-name>:
#         type: ethernet
#         link: <link-name>        # Same on both ends to create a link
#         speed: 1000              # Expected speed in Mbps
#         duplex: full             # Expected duplex
#         mtu: 1500                # Expected MTU
#         sfp_type: SFP-10G-SR     # Optional: for optical threshold checks
#
# SUPPORTED SFP TYPES (for optical validation):
# -----------------------------------------------
#   10G SFPs:
#     SFP-10G-SR  - Short Range (300m MMF), RX: -9.5 to 2.0 dBm
#     SFP-10G-LR  - Long Range (10km SMF), RX: -14.4 to 0.5 dBm
#     SFP-10G-ER  - Extended Range (40km SMF), RX: -15.8 to -1.0 dBm
#
#   1G SFPs:
#     SFP-1G-SX   - Short Range (550m MMF), RX: -17.0 to 0.0 dBm
#     SFP-1G-LX   - Long Range (10km SMF), RX: -19.0 to -3.0 dBm
#
#   Note: To add custom SFP types, edit SFP_THRESHOLDS in tests/layer1/test_layer1.py
#
# =============================================================================

devices:
  router1:
    os: iosxe
    type: router
    credentials:
      default:
        username: '%ENV{PYATS_USERNAME}'
        password: '%ENV{PYATS_PASSWORD}'
    connections:
      defaults:
        class: unicon.Unicon
      cli:
        protocol: ssh
        ip: 192.168.1.1
        port: 22

  router2:
    os: iosxe
    type: router
    credentials:
      default:
        username: '%ENV{PYATS_USERNAME}'
        password: '%ENV{PYATS_PASSWORD}'
    connections:
      defaults:
        class: unicon.Unicon
      cli:
        protocol: ssh
        ip: 192.168.1.2
        port: 22

  legacy-router:
    os: ios
    type: router
    credentials:
      default:
        username: '%ENV{PYATS_USERNAME}'
        password: '%ENV{PYATS_PASSWORD}'
    connections:
      defaults:
        class: unicon.Unicon
      cli:
        protocol: ssh
        ip: 192.168.1.3
        port: 22
        ssh_options: -o KexAlgorithms=+diffie-hellman-group1-sha1 -o HostKeyAlgorithms=+ssh-rsa

topology:
  router1:
    interfaces:
      GigabitEthernet1:
        type: ethernet
        link: router1-router2
        speed: 1000
        duplex: full
        mtu: 1500
        sfp_type: SFP-1G-SX          # Fiber link - validate optical levels
      GigabitEthernet2:
        type: ethernet
        link: router1-legacy
        speed: 1000
        duplex: full
        mtu: 1500
        # No sfp_type - copper link (optical checks will be skipped)

  router2:
    interfaces:
      GigabitEthernet1:
        type: ethernet
        link: router1-router2
        speed: 1000
        duplex: full
        mtu: 1500
        sfp_type: SFP-1G-SX          # Must match router1's SFP type

  legacy-router:
    interfaces:
      GigabitEthernet0/0:
        type: ethernet
        link: router1-legacy
        speed: 1000
        duplex: full
        mtu: 1500
